(function(e){e.fn.nbspSlider=function(t){var n={widths:"800px",heights:"300px",autoplay:0,delays:4e3,prevId:"prevBtn",nextId:"nextBtn",effect:"horizontal",speeds:800,altOpa:.5,altBgColor:"#ccc",altHeight:"40px",altShow:0,altFontColor:"#fff",starEndNoEff:0,preNexBtnShow:1,numBtnSty:"num",numBtnShow:1},t=e.extend(n,t);return t.widths=parseInt(t.widths)+"px",t.heights=parseInt(t.heights)+"px",this.each(function(){function a(r,i,s){var o;i?o=i:o=p(r,s),e("ul",n).trigger("fn_"+t.effect,[o])}function l(){f.attr("class",t.numBtnSty)}function h(r){l(),e("#btnList li",n).eq(r).attr("class",t.numBtnSty+"_act")}function v(t){var r=e(n).find("ul li img").eq(t).attr("alt");e(n).find("#altbox").text(r)}var n=e(this),r=e("li",n).length,i=r-1,s=0;t.effect=="horizontal"?e(n).find("ul").css("width",r*parseInt(t.widths)+"px"):e("ul",n).css("width",t.widths),e(n).css({width:t.widths,height:t.heights,position:"relative",overflow:"hidden"}),e("ul",n).css({position:"absolute",left:"0"}),e("ul li,img",n).css({width:t.widths,height:t.heights,border:"none","float":"left"}),e(n).append('<span class="sliderBtn" id='+t.prevId+"></span>"+'<span class="sliderBtn" id='+t.nextId+"></span>"+'<div id="altbox">'+e(n).find("ul li img").eq(0).attr("alt")+'</div><div id="btnList"></div>'),e("#altbox",n).css({width:parseInt(t.widths)-20+"px",height:t.altHeight,"line-height":t.altHeight,opacity:t.altOpa,background:t.altBgColor,padding:"0 10px 0 10px",position:"absolute",bottom:"0",color:t.altFontColor,"text-align":"left",left:"0"});var o=r;for(var u=1;u<=o;o--)e(n).find("#btnList").append("<li>"+(t.numBtnSty=="num"?o:"<i style='float:left;text-indent:-9999px;'>"+o+"</i>")+"</li>");e("#btnList",n).css({width:parseInt(t.widths)-20+"px",left:"0"}),t.numBtnSty!=""&&e("#btnList li",n).addClass(t.numBtnSty),e(".sliderBtn",n).css("opacity",.2).hover(function(){e(this).stop(!0,!1).animate({opacity:"0.5"},300)},function(){e(this).stop(!0,!1).animate({opacity:"0.2"},300)}),t.preNexBtnShow==0?e(".sliderBtn",n).hide():"",t.altShow==0?e(n).find("#altbox").hide():"",t.numBtnShow==0?e("#btnList",n).hide():"",e(".sliderBtn",n).click(function(){var t=e(this).attr("id").substring(0,4);a(t)});var f=e(n).find("#btnList li");(function(n){n.hover(function(){e(this).hasClass(t.numBtnSty+"_act")?"":e(this).attr("class",t.numBtnSty+"_hover")},function(){e(this).hasClass(t.numBtnSty+"_act")?"":e(this).attr("class",t.numBtnSty)})})(f),l,e("#btnList li:last-child",n).attr("class",t.numBtnSty+"_act");var c;f.click(function(){l(),s=s>i?0:parseInt(e(this).text())-1;var n=function(){return t.effect=="horizontal"?s*parseInt(t.widths):s*parseInt(t.heights)}();n==0?n:n="-"+n,a("next",parseInt(n)+"px",1),e(this).attr("class",t.numBtnSty+"_act")});var p=function(e,n){e=="next"?s=s>=i?0:s+1:0,e=="prev"?s=s<=0?i:s-1:0,n==1?s=0:h("-"+(s+1)),v(s);var r=s*parseInt(t.widths)*-1,o=s*parseInt(t.heights)*-1;return t.effect=="horizontal"?r:o};e("ul",n).bind("fn_"+t.effect,function(n,r){t.effect=="horizontal"?t.noEffect==1?e(this).css("margin-left",r):s!=0&&s!=i||t.starEndNoEff!=1?e(this).animate({marginLeft:r},t.speeds):e(this).css("margin-left",r):t.effect=="none"||t.starEndNoEff==1&&(s==0||s==i)?e(this).css("margin-top",r):t.effect=="fade"?e(this).hide(1).animate({marginTop:r},30).fadeIn("slow"):e(this).animate({marginTop:r},t.speeds),v(s)});if(t.autoplay==1){var d;e(n).hover(function(){clearInterval(d)},function(){d=setInterval(function(){a("next")},t.delays)}).trigger("mouseleave")}})}})(jQuery)